<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCMAI</title>
    <style>
        /* =========================================
           1. Dashboard æ¨£å¼
           ========================================= */
        :root {
            /* --- Dashboard åŸæœ‰è®Šæ•¸ --- */
            --color-light-bg: #F8F9FA; 
            --color-card-bg: #FFFFFF; 
            --color-primary: #3B82F6; 
            --color-secondary: #60A5FA; 
            --color-text-dark: #344767; 
            --color-text-mid: #6C757D; 
            --color-border: #E2E8F0; 

            --color-status-success: #10B981; 
            --color-status-warning: #FBBF24; 
            --color-status-danger: #EF4444; 

            /* --- Chat Widget å°ˆç”¨è®Šæ•¸ --- */
            --chat-dark-bg: #111827;       /* Header/Footer èƒŒæ™¯ */
            --chat-card-bg: #1F2937;       /* è¦–çª—ä¸»é«”èƒŒæ™¯ */
            --chat-primary: #3B82F6;       /* å¼·èª¿è‰² (ç§‘æŠ€è—) */
            
            --chat-text-light: #F9FAFB;    /* ä¸»è¦æ–‡å­— */
            --chat-text-dark: #1F2937;     /* æ·±è‰²æ–‡å­— (ç™½åº•ç”¨) */
            --chat-text-dim: #9CA3AF;      /* æ¬¡è¦æ–‡å­— */
            
            --chat-bot-bubble: #374151;    /* æ©Ÿå™¨äººæ°£æ³¡ */
            --chat-user-text: #FFFFFF;     /* ä½¿ç”¨è€…æ°£æ³¡æ–‡å­— */
            --chat-input-bg: #374151;      /* è¼¸å…¥æ¡†èƒŒæ™¯ */

            /* --- å¡ç‰‡å°ˆç”¨è®Šæ•¸ (ç™½åº•é¢¨æ ¼) --- */
            --card-bg-white: #FFFFFF;      /* å¡ç‰‡ç™½åº• */
            --card-border-light: #E5E7EB;  /* å¡ç‰‡æ·ºç°åˆ†éš”ç·š */
            --card-hover-bg: #EFF6FF;      /* æŒ‰éˆ•æ‡¸åœæ·¡è—è‰² */
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Inter', 'Segoe UI', 'Helvetica Neue', sans-serif;
            background-color: var(--color-light-bg);
            color: var(--color-text-dark);
            line-height: 1.6;
        }
        .container { max-width: 1300px; margin: 0 auto; padding: 0 20px; }

        /* --- Dashboard Header --- */
        header {
            background-color: var(--color-card-bg);
            padding: 20px 0;
            border-bottom: 1px solid var(--color-border);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            position: sticky; top: 0; z-index: 1000; /* è®“å°èˆªåˆ—å›ºå®šåœ¨é ‚éƒ¨ */
        }
        .logo { color: var(--color-primary); font-size: 2em; font-weight: 700; }
        nav a { color: var(--color-text-mid); text-decoration: none; margin-left: 30px; transition: color 0.3s; }
        nav a:hover { color: var(--color-primary); }

        /* --- Dashboard Hero --- */
        .hero { padding: 100px 0 50px; text-align: center; background-color: var(--color-light-bg); }
        .hero h1 { font-size: 5em; color: var(--color-primary); margin-bottom: 10px; font-weight: 700; }
        .hero .subtitle { font-size: 1.8em; color: var(--color-text-dark); margin-bottom: 40px; }
        .hero p { font-size: 1.1em; color: var(--color-text-mid); max-width: 800px; margin: 0 auto 50px auto; }
        
        .cta-button {
            background-color: var(--color-primary); color: var(--color-card-bg);
            padding: 15px 40px; font-size: 1.2em; font-weight: bold;
            border: none; border-radius: 8px; cursor: pointer; text-decoration: none;
            transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: inline-block;
        }
        .cta-button:hover {
            background-color: #2563EB; transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0,0,0,0.15);
        }

        /* --- Dashboard Grid Layout --- */
        .dashboard-section { padding: 50px 0; background-color: var(--color-light-bg); }
        .dashboard-title { text-align: center; font-size: 2.2em; color: var(--color-text-dark); margin-bottom: 40px; font-weight: 600; }
        
        .dashboard-grid { display: grid; grid-template-columns: 1.65fr 1.25fr 1.25fr; gap: 20px; }
        .module-card {
            background-color: var(--color-card-bg); padding: 20px;
            border-radius: 12px; border: 1px solid var(--color-border);
            box-shadow: 0 4px 10px rgba(0,0,0,0.08); min-height: 350px;
            display: flex; flex-direction: column; justify-content: space-between;
        }
        .module-card h3 {
            color: var(--color-primary); font-size: 1.4em;
            border-bottom: 1px solid var(--color-border); padding-bottom: 10px; margin-bottom: 20px; font-weight: 600;
        }

        /* --- Specific Modules --- */
        .main-module { text-align: center; border: 2px solid var(--color-primary); box-shadow: 0 8px 15px rgba(59, 130, 246, 0.2); }
        .mwcs-score { font-size: 5em; font-weight: bold; color: var(--color-status-warning); margin-top: 30px; transition: color 0.5s; }
        .mwcs-label { color: var(--color-text-mid); font-size: 1.2em; }
        
        .rag-module h4 { color: var(--color-text-dark); margin-top: 15px; font-weight: 600; }
        .rag-status { color: var(--color-status-success); font-size: 2.5em; margin-top: 30px; font-weight: bold; }
        
        .pfcf-value { font-size: 3em; font-weight: bold; color: var(--color-primary); margin-top: 30px; }
        .pfcf-unit { color: var(--color-text-mid); font-size: 1.5em; }

        /* --- Matrix Section --- */
        .matrix-section { padding: 80px 0; text-align: center; background-color: var(--color-light-bg); }
        .matrix-section h2 { font-size: 2.5em; color: var(--color-text-dark); margin-bottom: 40px; font-weight: 600; }
        .matrix-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
        .matrix-item {
            background-color: var(--color-card-bg); padding: 25px;
            border-left: 4px solid var(--color-secondary); text-align: left;
            border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.06);
        }
        .matrix-item h4 { color: var(--color-primary); margin-bottom: 10px; font-weight: 600; }
        .matrix-item p { font-size: 1em; color: var(--color-text-mid); }

        /* --- [NEW] About Us Section (å«å½±ç‰‡) --- */
        .about-section {
            padding: 100px 0;
            background-color: #FFFFFF; /* ç™½åº•ï¼Œå€éš”ä¸Šä¸‹å€å¡Š */
            text-align: center;
            border-top: 1px solid var(--color-border);
        }
        .about-section h2 {
            font-size: 2.5em; color: var(--color-text-dark); margin-bottom: 20px; font-weight: 700;
        }
        .about-section p {
            font-size: 1.2em; color: var(--color-text-mid); max-width: 800px; margin: 0 auto 40px auto; line-height: 1.8;
        }
        /* å½±ç‰‡éŸ¿æ‡‰å¼å®¹å™¨ */
        .video-container {
            position: relative;
            width: 100%;
            max-width: 900px; /* å½±ç‰‡æœ€å¤§å¯¬åº¦ */
            margin: 0 auto;
            padding-bottom: 56.25%; /* 16:9 æ¯”ä¾‹ (9/16 = 0.5625) */
            height: 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.15); /* æ¼‚äº®çš„é™°å½± */
            background-color: #000; /* å½±ç‰‡è¼‰å…¥å‰çš„åº•è‰² */
        }
        .video-container iframe {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0;
        }
        /* å½±ç‰‡ä½”ä½ç¬¦ (Placeholder) - åƒ…ä¾› Demo é¡¯ç¤º */
        .video-placeholder {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            color: #fff; font-size: 1.5em;
        }

        /* --- Footer --- */
        .contact-cta-section { padding: 80px 0; background-color: var(--color-light-bg); text-align: center; border-top: 1px solid var(--color-border); }
        .contact-cta-section h2 { color: var(--color-primary); font-size: 2.5em; margin-bottom: 20px; font-weight: 700; }
        .contact-cta-section p { font-size: 1.3em; color: var(--color-text-mid); max-width: 900px; margin: 0 auto 30px auto; }
        footer { background-color: var(--color-text-dark); color: var(--color-light-bg); padding: 30px 0; margin-top: 50px; text-align: center; font-size: 0.9em; }

        /* --- RWD --- */
        @media (max-width: 992px) {
            .dashboard-grid { grid-template-columns: 1fr; }
            .matrix-grid { grid-template-columns: repeat(2, 1fr); }
            .hero h1 { font-size: 3.5em; }
        }
        @media (max-width: 768px) {
            nav { flex-direction: column; align-items: flex-start !important; }
            .matrix-grid { grid-template-columns: 1fr; }
        }

        /* =========================================
           2. Chat Widget æ¨£å¼
           ========================================= */
        .chat-widget-trigger {
            position: fixed; bottom: 30px; right: 30px;
            background-color: var(--chat-primary); color: #fff;
            border: none; border-radius: 50%; width: 60px; height: 60px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
            z-index: 9998; transition: transform 0.3s;
        }
        .chat-widget-trigger:hover { transform: scale(1.1); }
        .chat-widget-trigger svg { width: 32px; height: 32px; fill: currentColor; }

        .chat-widget-window {
            position: fixed; bottom: 100px; right: 30px;
            width: 380px; max-width: 90vw; height: 600px;
            background-color: var(--chat-card-bg); border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex; flex-direction: column; overflow: hidden;
            z-index: 9999; transform: translateY(20px); opacity: 0; visibility: hidden;
            transition: all 0.3s ease;
            font-family: 'Segoe UI', sans-serif;
        }
        .chat-widget-window.active { transform: translateY(0); opacity: 1; visibility: visible; }

        .chat-header {
            background-color: var(--chat-dark-bg); padding: 15px 20px;
            color: var(--chat-text-light); font-weight: bold;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .close-btn { background: none; border: none; color: var(--chat-text-dim); font-size: 20px; cursor: pointer; }
        .close-btn:hover { color: #fff; }

        .chat-messages {
            flex-grow: 1; padding: 20px; overflow-y: auto;
            background-color: var(--chat-card-bg); display: flex; flex-direction: column;
        }
        .message {
            margin-bottom: 15px; max-width: 85%; padding: 12px 16px;
            border-radius: 12px; line-height: 1.6; word-wrap: break-word;
            font-size: 0.95em;
        }
        .message.user {
            background-color: var(--chat-primary); color: var(--chat-user-text);
            margin-left: auto; border-bottom-right-radius: 2px;
        }
        .message.bot {
            background-color: var(--chat-bot-bubble); color: var(--chat-text-light);
            margin-right: auto; border-bottom-left-radius: 2px;
        }

        .carousel-wrapper { position: relative; margin-bottom: 15px; width: 100%; }
        .card-container {
            display: flex; gap: 12px; overflow-x: auto; padding: 5px;
            scroll-behavior: smooth; scrollbar-width: none; align-items: flex-start;
        }
        .card-container::-webkit-scrollbar { display: none; }
        
        .rich-card {
            min-width: 210px; max-width: 220px; 
            background-color: var(--card-bg-white);
            border-radius: 10px; overflow: hidden; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            border: 1px solid #4B5563;
            flex-shrink: 0; height: fit-content;
        }
        .card-image {
            width: 100%; height: 100px; display: flex; align-items: center; justify-content: center;
            background-color: #E0F2FE; color: var(--chat-primary); font-size: 2.5em;
        }
        .card-title {
            padding: 10px; color: var(--chat-text-dark); font-weight: bold; text-align: center;
            border-bottom: 1px solid var(--card-border-light); background-color: var(--card-bg-white);
        }
        .card-btn {
            display: block; width: 100%; padding: 12px 15px; background: none; border: none;
            border-bottom: 1px solid var(--card-border-light); 
            color: var(--chat-text-dark); cursor: pointer;
            text-align: left; line-height: 1.4; font-size: 0.9em; transition: background 0.2s;
        }
        .card-btn:last-child { border-bottom: none; }
        .card-btn:hover { background-color: var(--card-hover-bg); color: var(--chat-primary); }
        
        .scroll-btn {
            position: absolute; top: 50%; transform: translateY(-50%);
            width: 28px; height: 28px; border-radius: 50%; border: none;
            background-color: rgba(59, 130, 246, 0.8); color: #fff; cursor: pointer; z-index: 10;
        }
        .scroll-btn.left { left: 0; } .scroll-btn.right { right: 0; }

        .quick-menu-area { 
            padding: 10px 15px; background-color: var(--chat-dark-bg); 
            border-top: 1px solid rgba(255,255,255,0.1); 
        }
        .quick-chips-container { display: flex; gap: 8px; overflow-x: auto; scrollbar-width: none; }
        .quick-chips-container::-webkit-scrollbar { display: none; }
        .quick-chip {
            white-space: nowrap; padding: 6px 14px; border-radius: 20px; background: rgba(255,255,255,0.05);
            border: 1px solid var(--chat-primary); color: var(--chat-primary); font-size: 0.85em; cursor: pointer;
        }
        .quick-chip:hover { background-color: var(--chat-primary); color: #fff; }

        .input-toolbar { background-color: var(--chat-dark-bg); padding: 0 15px 15px 15px; }
        .language-row { display: flex; align-items: center; margin-bottom: 8px; font-size: 0.85em; color: var(--chat-text-dim); }
        .lang-select {
            background-color: var(--chat-input-bg); border: 1px solid #4B5563; 
            color: var(--chat-text-light); border-radius: 4px; padding: 2px 5px; margin-left: 8px; cursor: pointer;
        }
        .chat-input-area { display: flex; gap: 10px; }
        #chatInput {
            flex-grow: 1; border: 1px solid #4B5563; border-radius: 20px; padding: 10px 15px;
            background-color: var(--chat-input-bg); color: var(--chat-text-light); font-size: 1em;
        }
        #chatInput:focus { outline: none; border-color: var(--chat-primary); }
        #sendBtn {
            border: none; background-color: var(--chat-primary); color: #fff;
            padding: 0 20px; border-radius: 20px; font-weight: bold; cursor: pointer; white-space: nowrap;
        }
        #sendBtn:hover { background-color: #2563EB; }

        .message.typing { color: var(--chat-text-dim); font-style: italic; border:none; box-shadow:none; background:none;}
        .citations { display: none; }
    </style>
</head>
<body>

    <header>
        <div class="container">
            <nav style="display: flex; justify-content: space-between; align-items: center;">
                <div class="logo">MIGRANT CREDIT MASTER AI</div>
                <div>
                    <a href="#dashboard">AI å„€è¡¨æ¿</a>
                    <a href="#matrix">å„ªå‹¢çŸ©é™£</a>
                    <a href="#about">é—œæ–¼æˆ‘å€‘</a>
                    <a href="#contact">è¯çµ¡æ´½è©¢</a>
                </div>
            </nav>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <p style="font-size: 1.25em; font-weight: 600; color: var(--color-text-mid); margin-bottom: -10px; letter-spacing: 1px;">
                æˆªæ­¢ç›®å‰å…¨å°å¤–ç±ç§»å·¥ç¸½äººæ•¸
            </p>
            
            <h1 style="display: flex; justify-content: center; align-items: baseline; gap: 10px;">
                <span id="marketCount">858,939</span>
                <span style="font-size: 0.4em; color: var(--color-text-mid);">äºº</span>
            </h1> 

            <div class="subtitle">ç§»å·¥å¾µä¿¡è—æµ·å¸‚å ´ | å°å…¥ AI é¢¨æ§èˆ‡å¤šèªè¨€æ™ºèƒ½å®¢æœ</div>
            <p>
                ã€Œç§»è²¸å®—å¸«ã€æä¾› B2B AI é¢¨æ§å³æœå‹™ï¼Œé€éå¤šæºæ›¿ä»£æ•¸æ“šèšåˆ(åŒ¯æ¬¾ã€æ¶ˆè²»ã€è¡Œç‚º...)
                ï¼Œç‚ºæ‚¨çš„é‡‘èç”¢å“è³¦èƒ½ï¼Œå®‰å…¨åœ°æœå‹™è¢«å‚³çµ±éŠ€è¡Œçµæ§‹æ€§æ’é™¤çš„ç§»å·¥å®¢ç¾¤ã€‚
                ä¸¦æä¾›å¤šèªè¨€AIæ™ºèƒ½å®¢æœï¼Œé™ä½ç¿»è­¯æºé€šæˆæœ¬ã€‚
            </p>
            <a href="javascript:void(0);" class="cta-button" onclick="scrollToDashboard()">
                å•Ÿå‹•å³æ™‚é¢¨æ§æ¨¡å‹(æˆ–é«”é©—å®¢æœ) DEMO
            </a>
        </div>
    </section>

    <section class="dashboard-section" id="dashboard">
        <div class="container">
            <div class="dashboard-title">
                ç³»çµ±ç‹€æ…‹ï¼šAI å¼•æ“å³æ™‚æ¨è«– (API è¼¸å‡ºæ¨¡æ“¬)
            </div>
            
            <div class="dashboard-grid">
                
                <div class="module-card main-module">
                    <h3>[API CALL] ç§»å·¥ä¿¡ç”¨è©•ä¼° (MWCS Score)</h3>
                    <div class="mwcs-score" id="mwcsScore">--</div>
                    <div class="mwcs-label">Migrant Worker Credit Score (0-100)</div>
                    <p style="margin-top: 20px; color: var(--color-text-mid);">
                        MWCS æ ¹æ“šæ›¿ä»£æ•¸æ“šï¼Œé æ¸¬æœªä¾† 12 å€‹æœˆé•ç´„æ©Ÿç‡ã€‚
                    </p>
                    <button class="cta-button" style="margin-top: 30px; position: relative; padding: 10px 20px; font-size: 1em;" onclick="simulateAI()">
                        åŸ·è¡Œæ¨è«–
                    </button>
                </div>

                <div class="module-card pfcf-module">
                    <h3>PFCFï¼šé‚„æ¬¾èƒ½åŠ›é æ¸¬</h3>
                    <div class="pfcf-value" id="pfcValue">--</div>
                    <div class="pfcf-unit" id="pfcUnit">NTD / æœˆ (ä¸Šé™)</div>
                    <p style="margin-top: 20px; font-size: 0.9em; color: var(--color-text-mid);">
                        PFCF (Personal Free Cash Flow) é æ¸¬æ¯æœˆå¯è‡ªç”±é‹ç”¨ç¾é‡‘æµï¼Œä½œç‚ºã€Œå»ºè­°æœ€é«˜æœˆé‚„æ¬¾é‡‘é¡ã€ä¸Šé™ã€‚
                    </p>
                </div>

                <div class="module-card rag-module">
                    <div>
                        <h3>RAG å®¢æœæ¨¡çµ„ç‹€æ…‹</h3>
                        <div class="rag-status" id="ragStatus" style="margin-top: 15px;">ONLINE</div>
                        <div class="mwcs-label">å¤šèªè¨€æœå‹™ 24/7 é‹ä½œä¸­</div>
                        <h4 style="margin-top: 20px;">æ•ˆç›ŠæŒ‡æ¨™ï¼š</h4>
                        <p style="font-size: 0.9em; color: var(--color-text-mid);">
                            - æœå‹™æˆæœ¬é™ä½ï¼š æ“ºè„«å¤šèªè¨€å®¢æœä¾è³´ã€‚<br>
                            - åˆè¦æ€§ï¼š åŸºæ–¼å®˜æ–¹æ–‡ä»¶ç¢ºä¿è³‡è¨Šæº–ç¢ºã€‚
                        </p>
                    </div>
                    
                    <button class="cta-button" style="margin-top: 20px; padding: 10px 0; font-size: 1em; width: 100%;" onclick="toggleChatWindow()">
                        å•Ÿå‹•AIæ™ºèƒ½å®¢æœDEMO
                    </button>
                </div>

            </div>
        </div>
    </section>
    
    <section class="matrix-section" id="matrix">
        <div class="container">
            <h2>B2B åˆä½œå„ªå‹¢çŸ©é™£</h2>
            <div class="matrix-grid">
                <div class="matrix-item">
                    <h4>è§£é–æ–°å®¢ç¾¤</h4>
                    <p>æœå‹™éŠ€è¡Œç„¡æ³•æœå‹™çš„ 85 è¬å®¢ç¾¤ï¼Œç‰¹åˆ¥æ˜¯ç¤¾ç¦ç§»å·¥ã€‚</p>
                </div>
                <div class="matrix-item">
                    <h4>ç²¾æº–å®šåƒ¹</h4>
                    <p>PFCF æ¨¡å‹å¯¦ç¾ç²¾ç®—é‚„æ¬¾èƒ½åŠ›ï¼Œè®“æ‚¨èƒ½çµ¦äºˆå…¬å¹³åˆ©ç‡ã€‚</p>
                </div>
                <div class="matrix-item">
                    <h4>å³æ™‚é¢¨éšªé è­¦</h4>
                    <p>AI è¡Œç‚ºåµæ¸¬ï¼Œä¸»å‹•é è­¦åŒ¯æ¬¾ä¸­æ–·ç­‰é«˜é¢¨éšªäº‹ä»¶ï¼Œé™ä½å‘†å¸³ã€‚</p>
                </div>
                <div class="matrix-item">
                    <h4>é™ä½ç‡Ÿé‹æˆæœ¬</h4>
                    <p>RAG æ™ºèƒ½å®¢æœå¯¦ç¾å¤šèªè¨€æœå‹™è‡ªå‹•åŒ–ï¼Œå„ªåŒ–ç‡Ÿé‹æ•ˆç‡ã€‚</p>
                </div>
                <div class="matrix-item">
                    <h4>åˆè¦é€æ˜</h4>
                    <p>æä¾›åŸºæ–¼ SHAP çš„å¯è§£é‡‹æ±ºç­–ï¼Œè¼•é¬†é€šéå…§éƒ¨å¯©æ ¸èˆ‡ç›£ç®¡ã€‚</p>
                </div>
                <div class="matrix-item">
                    <h4>å¿«é€Ÿéƒ¨ç½²</h4>
                    <p>æ¨™æº–åŒ– API æ¨¡çµ„ï¼Œå¯¦ç¾é¢¨æ§èƒ½åŠ›å¿«é€ŸåµŒå…¥èˆ‡ä¸Šç·šã€‚</p>
                </div>
            </div>
        </div>
    </section>

    <section class="about-section" id="about">
        <div class="container">
            <h2>é—œæ–¼æˆ‘å€‘</h2>
            <p>
                æˆ‘å€‘æ˜¯ä¸€ç¾¤è‡´åŠ›æ–¼ç”¨ AI æŠ€è¡“è§£æ±ºã€Œé‡‘èæ’æ–¥ã€å•é¡Œçš„å‰µæ–°åœ˜éšŠ
                <br>
                é€éç¨å®¶çš„æ›¿ä»£æ•¸æ“šæ¨¡å‹ï¼Œå”åŠ©éå‚³çµ±é‡‘èæ©Ÿæ§‹çœ‹è¦‹ç§»å·¥çš„çœŸå¯¦ä¿¡ç”¨åƒ¹å€¼
                <br>
		å¹«åŠ©Bç«¯å¤¥ä¼´æ‹“å±•è—æµ·å¸‚å ´
            </p>
            
            <div class="video-container">
                <iframe 
       		  width="560" 
        	  height="315" 
        	  src="https://youtu.be/Qn9vKM_2hAA" 
        	  title="MCMAI åœ˜éšŠä»‹ç´¹" 
        	  frameborder="0" 
        	  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
        	 allowfullscreen>
		</iframe>
        </div>
    </section>

    <section class="contact-cta-section" id="contact">
        <div class="container">
            <h2>æº–å‚™å¥½å•Ÿå‹•æ‚¨çš„æ–°ç‡Ÿæ”¶æ›²ç·šäº†å—ï¼Ÿ</h2>
            <p>
                æˆ‘å€‘æ˜¯æŠ€è¡“è³¦èƒ½å¹³å°ï¼Œä¸æŒæœ‰é¢¨éšªã€‚æˆ‘å€‘çš„ç‡Ÿæ”¶æ¨¡å¼æ¸…æ™°å¯æ“´å±•ï¼šAPI å‘¼å«è²»ã€æ¨¡å‹è¨‚é–±è²»ã€‚
            </p>
            <a href="mailto: s310751030@gm.ntpu.edu.tw" class="cta-button">è¯çµ¡æ¥­å‹™æ´½è©¢</a>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>MIGRANT MASTER_AI | å°ˆæ³¨ç§»å·¥é‡‘èç§‘æŠ€å‰µæ–°</p>
            <p>Email: s310751030@gm.ntpu.edu.tw</p>
        </div>
    </footer>

    <div class="chat-widget-window" id="chatWindow">
        <div class="chat-header">
            <span id="uiHeaderTitle">AIå€Ÿè²¸æ™ºæ…§å®¢æœ</span>
            <button class="close-btn" id="closeBtn">&times;</button>
        </div>
        
        <div class="chat-messages" id="messagesContainer">
        </div>

        <div class="quick-menu-area">
            <div class="quick-chips-container" id="quickChipsContainer"></div>
        </div>
        <div class="input-toolbar">
            <div class="language-row">
                <label for="langSelect">Language:</label>
                <select id="langSelect" class="lang-select">
                    <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                    <option value="vi">Tiáº¿ng Viá»‡t</option>
                    <option value="id">Bahasa Indonesia</option>
                    <option value="th">à¸ à¸²à¸©à¸²à¹„à¸—à¸¢</option>
                    <option value="en">English</option>
                </select>
            </div>
            <div class="chat-input-area">
                <input type="text" id="chatInput" placeholder="è¼¸å…¥æ‚¨çš„å•é¡Œ...">
                <button id="sendBtn">å‚³é€</button>
            </div>
        </div>
    </div>

    <button class="chat-widget-trigger" id="chatTrigger">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 9V7c0-1.1-.9-2-2-2h-3c0-1.66-1.34-3-3-3S9 3.34 9 5H6c-1.1 0-2 .9-2 2v2c-1.66 0-3 1.34-3 3s1.34 3 3 3v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c1.66 0 3-1.34 3-3s-1.34-3-3-3zM7.5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5zm9 0c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5z"/></svg>
    </button>

    <script>
        // ----------------------------------------------------
        // 1. Dashboard åŸæœ‰åŠŸèƒ½
        // ----------------------------------------------------
        function simulateAI() {
            const button = document.querySelector('.main-module button');
            const mwcsElement = document.getElementById('mwcsScore');
            const pfcElement = document.getElementById('pfcValue');

            button.disabled = true;
            button.textContent = '...è™•ç†ä¸­...';
            mwcsElement.textContent = 'PROCESSING';
            pfcElement.textContent = 'N/A';
            mwcsElement.style.color = 'var(--color-secondary)'; 

            setTimeout(() => {
                const simulatedPD = Math.random() * 0.15 + 0.05; 
                const mwcsScore = Math.round(100 * (1 - simulatedPD)); 
                const pfcValue = Math.floor(Math.random() * (15000 - 8000 + 1) + 8000); 

                mwcsElement.textContent = mwcsScore;
                pfcElement.textContent = pfcValue.toLocaleString(); 

                let scoreColor;
                if (mwcsScore >= 80) scoreColor = 'var(--color-status-success)';
                else if (mwcsScore >= 60) scoreColor = 'var(--color-status-warning)';
                else scoreColor = 'var(--color-status-danger)';

                mwcsElement.style.color = scoreColor;
                button.disabled = false;
                button.textContent = 'å†æ¬¡åŸ·è¡Œæ¨è«–';
            }, 3000); 
        }
        
        function scrollToDashboard() {
            document.getElementById('dashboard').scrollIntoView({ behavior: 'smooth' });
        }
        
        function animateMarketCount(targetValue) {
            const element = document.getElementById('marketCount');
            let startValue = 0;
            const duration = 2000;
            const startTime = performance.now();
            function updateCount(currentTime) {
                const elapsedTime = currentTime - startTime;
                const progress = Math.min(elapsedTime / duration, 1);
                const currentValue = Math.floor(startValue + progress * (targetValue - startValue));
                element.textContent = currentValue.toLocaleString();
                if (progress < 1) requestAnimationFrame(updateCount);
                else element.textContent = targetValue.toLocaleString();
            }
            requestAnimationFrame(updateCount);
        }

        // ----------------------------------------------------
        // 2. å¤šèªè¨€ Chat Widget è³‡æ–™
        // ----------------------------------------------------
        const i18nData = {
            "zh-TW": {
                header: "AIå€Ÿè²¸æ™ºæ…§å®¢æœ",
                placeholder: "è¼¸å…¥æ‚¨çš„å•é¡Œ...",
                send: "å‚³é€",
                welcome: "æ‚¨å¥½ï¼æˆ‘æ˜¯ç§»è²¸å®—å¸« AI åŠ©ç†ã€‚è«‹å•æœ‰ä»€éº¼èƒ½å¹«æ‚¨çš„ï¼Ÿ",
                typing: "AI æ€è€ƒä¸­...",
                richMenu: [
                    {
                        title: "ğŸ’° ç§»å·¥å°é¡ä¿¡è²¸", imageIcon: "ğŸ’¸",
                        actions: [
                            { label: "å¦‚ä½•ç”³è«‹è²¸æ¬¾ï¼Ÿ", question: "è«‹å•å¤–ç±ç§»å·¥å¦‚ä½•ç”³è«‹å°é¡è²¸æ¬¾ï¼Ÿæµç¨‹æ˜¯ä»€éº¼ï¼Ÿ" },
                            { label: "å¯©æ ¸éœ€è¦å¤šä¹…ï¼Ÿ", question: "è«‹å•è²¸æ¬¾å¯©æ ¸æ™‚é–“é€šå¸¸éœ€è¦å¤šä¹…ï¼Ÿ" },
                            { label: "å¯ä»¥ææ—©é‚„æ¬¾å—ï¼Ÿ", question: "è«‹å•åˆç´„æ˜¯å¦å…è¨±ææ—©é‚„æ¬¾ï¼Ÿæœ‰é•ç´„é‡‘å—ï¼Ÿ" }
                        ]
                    },
                    {
                        title: "ğŸ¦ å¸³æˆ¶èˆ‡ç¹³è²»", imageIcon: "ğŸ’³",
                        actions: [
                            { label: "æŸ¥è©¢è²¸æ¬¾é¤˜é¡", question: "æˆ‘è¦å¦‚ä½•æŸ¥è©¢ç›®å‰çš„è²¸æ¬¾é¤˜é¡ï¼Ÿ" },
                            { label: "ç¹³æ¬¾æ–¹å¼èªªæ˜", question: "è«‹å•æ”¯æ´å“ªäº›ç¹³æ¬¾æ–¹å¼ï¼Ÿ" }
                        ]
                    }
                ],
                chips: [
                    { label: "åˆ©ç‡å¤šå°‘", question: "è«‹å•å€Ÿæ¬¾åˆ©ç‡æ˜¯å¤šå°‘ï¼Ÿ" },
                    { label: "å¯è²¸é¡åº¦", question: "è«‹å•æˆ‘æœ€é«˜å¯ä»¥å€Ÿå¤šå°‘éŒ¢ï¼Ÿ" },
                    { label: "ç”³è«‹æ¢ä»¶", question: "è«‹å•ç”³è«‹è²¸æ¬¾éœ€è¦ä»€éº¼æ¢ä»¶ï¼Ÿ" },
                    { label: "éœ€è¦ä¿äººå—", question: "è«‹å•ç”³è«‹è²¸æ¬¾éœ€è¦ä¿è­‰äººå—ï¼Ÿ" }
                ]
            },
            "vi": {
                header: "Há»— trá»£ tÃ i chÃ­nh AI",
                placeholder: "Nháº­p cÃ¢u há»i cá»§a báº¡n...",
                send: "Gá»­i",
                welcome: "Xin chÃ o! TÃ´i lÃ  trá»£ lÃ½ AI. TÃ´i cÃ³ thá»ƒ giÃºp gÃ¬ cho báº¡n?",
                typing: "AI Ä‘ang suy nghÄ©...",
                richMenu: [
                    {
                        title: "ğŸ’° Vay tiÃªu dÃ¹ng", imageIcon: "ğŸ’¸",
                        actions: [
                            { label: "LÃ m tháº¿ nÃ o Ä‘á»ƒ Ä‘Äƒng kÃ½?", question: "LÃ m tháº¿ nÃ o Ä‘á»ƒ lao Ä‘á»™ng nÆ°á»›c ngoÃ i Ä‘Äƒng kÃ½ vay?" },
                            { label: "XÃ©t duyá»‡t bao lÃ¢u?", question: "Thá»i gian xÃ©t duyá»‡t khoáº£n vay lÃ  bao lÃ¢u?" },
                            { label: "Tráº£ trÆ°á»›c háº¡n Ä‘Æ°á»£c khÃ´ng?", question: "TÃ´i cÃ³ thá»ƒ tráº£ ná»£ trÆ°á»›c háº¡n khÃ´ng?" }
                        ]
                    },
                    {
                        title: "ğŸ¦ TÃ i khoáº£n & Thanh toÃ¡n", imageIcon: "ğŸ’³",
                        actions: [
                            { label: "Kiá»ƒm tra sá»‘ dÆ°", question: "LÃ m tháº¿ nÃ o Ä‘á»ƒ kiá»ƒm tra sá»‘ dÆ° khoáº£n vay?" },
                            { label: "CÃ¡ch thanh toÃ¡n", question: "CÃ³ nhá»¯ng phÆ°Æ¡ng thá»©c thanh toÃ¡n nÃ o?" }
                        ]
                    }
                ],
                chips: [
                    { label: "LÃ£i suáº¥t", question: "LÃ£i suáº¥t vay lÃ  bao nhiÃªu?" },
                    { label: "Háº¡n má»©c", question: "TÃ´i cÃ³ thá»ƒ vay tá»‘i Ä‘a bao nhiÃªu?" },
                    { label: "Äiá»u kiá»‡n", question: "Äiá»u kiá»‡n Ä‘Äƒng kÃ½ vay lÃ  gÃ¬?" },
                    { label: "NgÆ°á»i báº£o lÃ£nh", question: "CÃ³ cáº§n ngÆ°á»i báº£o lÃ£nh khÃ´ng?" }
                ]
            },
            "id": {
                header: "Layanan Keuangan AI",
                placeholder: "Masukkan pertanyaan Anda...",
                send: "Kirim",
                welcome: "Halo! Saya asisten AI. Ada yang bisa saya bantu?",
                typing: "AI sedang berpikir...",
                richMenu: [
                    {
                        title: "ğŸ’° Pinjaman Mikro", imageIcon: "ğŸ’¸",
                        actions: [
                            { label: "Cara Daftar", question: "Bagaimana cara pekerja asing mengajukan pinjaman?" },
                            { label: "Berapa Lama?", question: "Berapa lama proses persetujuan pinjaman?" },
                            { label: "Pelunasan Awal", question: "Bolehkah saya melunasi pinjaman lebih awal?" }
                        ]
                    },
                    {
                        title: "ğŸ¦ Akun & Pembayaran", imageIcon: "ğŸ’³",
                        actions: [
                            { label: "Cek Saldo", question: "Bagaimana cara mengecek sisa pinjaman?" },
                            { label: "Cara Bayar", question: "Metode pembayaran apa saja yang tersedia?" }
                        ]
                    }
                ],
                chips: [
                    { label: "Bunga", question: "Berapa suku bunganya?" },
                    { label: "Limit", question: "Berapa batas maksimal pinjaman?" },
                    { label: "Syarat", question: "Apa syarat pengajuannya?" },
                    { label: "Penjamin", question: "Apakah perlu penjamin?" }
                ]
            },
            "th": {
                header: "à¸šà¸£à¸´à¸à¸²à¸£à¸à¸²à¸£à¹€à¸‡à¸´à¸™ AI",
                placeholder: "à¸à¸£à¸­à¸à¸„à¸³à¸–à¸²à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“...",
                send: "à¸ªà¹ˆà¸‡",
                welcome: "à¸ªà¸§à¸±à¸ªà¸”à¸µ! à¸‰à¸±à¸™à¸„à¸·à¸­à¸œà¸¹à¹‰à¸Šà¹ˆà¸§à¸¢ AI à¸¡à¸µà¸­à¸°à¹„à¸£à¹ƒà¸«à¹‰à¸‰à¸±à¸™à¸Šà¹ˆà¸§à¸¢à¹„à¸«à¸¡?",
                typing: "AI à¸à¸³à¸¥à¸±à¸‡à¸„à¸´à¸”...",
                richMenu: [
                    {
                        title: "ğŸ’° à¸ªà¸´à¸™à¹€à¸Šà¸·à¹ˆà¸­à¸£à¸²à¸¢à¸¢à¹ˆà¸­à¸¢", imageIcon: "ğŸ’¸",
                        actions: [
                            { label: "à¸ªà¸¡à¸±à¸„à¸£à¸­à¸¢à¹ˆà¸²à¸‡à¹„à¸£", question: "à¹à¸£à¸‡à¸‡à¸²à¸™à¸•à¹ˆà¸²à¸‡à¸Šà¸²à¸•à¸´à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸´à¸™à¹€à¸Šà¸·à¹ˆà¸­à¸­à¸¢à¹ˆà¸²à¸‡à¹„à¸£?" },
                            { label: "à¹ƒà¸Šà¹‰à¹€à¸§à¸¥à¸²à¸™à¸²à¸™à¹„à¸«à¸¡", question: "à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸ªà¸´à¸™à¹€à¸Šà¸·à¹ˆà¸­à¹ƒà¸Šà¹‰à¹€à¸§à¸¥à¸²à¸™à¸²à¸™à¹€à¸—à¹ˆà¸²à¹„à¸«à¸£à¹ˆ?" },
                            { label: "à¸ˆà¹ˆà¸²à¸¢à¸à¹ˆà¸­à¸™à¸à¸³à¸«à¸™à¸”à¹„à¸”à¹‰à¹„à¸«à¸¡", question: "à¸ªà¸²à¸¡à¸²à¸£à¸–à¸›à¸´à¸”à¸¢à¸­à¸”à¸à¹ˆà¸­à¸™à¸à¸³à¸«à¸™à¸”à¹„à¸”à¹‰à¹„à¸«à¸¡?" }
                        ]
                    },
                    {
                        title: "ğŸ¦ à¸šà¸±à¸à¸Šà¸µà¹à¸¥à¸°à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™", imageIcon: "ğŸ’³",
                        actions: [
                            { label: "à¹€à¸Šà¹‡à¸„à¸¢à¸­à¸”à¸„à¸‡à¹€à¸«à¸¥à¸·à¸­", question: "à¸ˆà¸°à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸¢à¸­à¸”à¹€à¸‡à¸´à¸™à¸à¸¹à¹‰à¸„à¸‡à¹€à¸«à¸¥à¸·à¸­à¹„à¸”à¹‰à¸­à¸¢à¹ˆà¸²à¸‡à¹„à¸£?" },
                            { label: "à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™", question: "à¸¡à¸µà¸Šà¹ˆà¸­à¸‡à¸—à¸²à¸‡à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™à¸­à¸°à¹„à¸£à¸šà¹‰à¸²à¸‡?" }
                        ]
                    }
                ],
                chips: [
                    { label: "à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢", question: "à¸­à¸±à¸•à¸£à¸²à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢à¹€à¸—à¹ˆà¸²à¹„à¸«à¸£à¹ˆ?" },
                    { label: "à¸§à¸‡à¹€à¸‡à¸´à¸™", question: "à¸à¸¹à¹‰à¹„à¸”à¹‰à¸ªà¸¹à¸‡à¸ªà¸¸à¸”à¹€à¸—à¹ˆà¸²à¹„à¸«à¸£à¹ˆ?" },
                    { label: "à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚", question: "à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸à¸²à¸£à¸ªà¸¡à¸±à¸„à¸£à¸„à¸·à¸­à¸­à¸°à¹„à¸£?" },
                    { label: "à¸„à¸™à¸„à¹‰à¸³à¸›à¸£à¸°à¸à¸±à¸™", question: "à¸•à¹‰à¸­à¸‡à¸¡à¸µà¸„à¸™à¸„à¹‰à¸³à¸›à¸£à¸°à¸à¸±à¸™à¹„à¸«à¸¡?" }
                ]
            },
            "en": {
                header: "AI Financial Assistant",
                placeholder: "Type your question...",
                send: "Send",
                welcome: "Hello! I am your AI assistant. How can I help you?",
                typing: "AI is thinking...",
                richMenu: [
                    {
                        title: "ğŸ’° Micro Loan", imageIcon: "ğŸ’¸",
                        actions: [
                            { label: "How to Apply?", question: "How do migrant workers apply for a loan?" },
                            { label: "Approval Time?", question: "How long does the approval take?" },
                            { label: "Early Repayment?", question: "Can I repay the loan early?" }
                        ]
                    },
                    {
                        title: "ğŸ¦ Account & Pay", imageIcon: "ğŸ’³",
                        actions: [
                            { label: "Check Balance", question: "How to check my loan balance?" },
                            { label: "Payment Methods", question: "What payment methods are supported?" }
                        ]
                    }
                ],
                chips: [
                    { label: "Interest Rate", question: "What is the interest rate?" },
                    { label: "Max Amount", question: "What is the maximum loan amount?" },
                    { label: "Requirements", question: "What are the requirements?" },
                    { label: "Guarantor", question: "Do I need a guarantor?" }
                ]
            }
        };

        // ----------------------------------------------------
        // 3. DOM & åˆå§‹åŒ–é‚è¼¯
        // ----------------------------------------------------
        const chatWindow = document.getElementById('chatWindow');
        const chatInput = document.getElementById('chatInput');
        const messagesContainer = document.getElementById('messagesContainer');
        const quickChipsContainer = document.getElementById('quickChipsContainer');
        const langSelect = document.getElementById('langSelect');
        const uiHeaderTitle = document.getElementById('uiHeaderTitle');
        const sendBtn = document.getElementById('sendBtn');

        let currentLang = 'zh-TW';

        function initChat() {
            updateUI(currentLang); // åˆå§‹åŒ– UI

            // ç¶å®šäº‹ä»¶
            document.getElementById('chatTrigger').onclick = toggleChatWindow;
            document.getElementById('closeBtn').onclick = toggleChatWindow;
            sendBtn.onclick = handleSend;
            chatInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') handleSend(); });
            
            // èªè¨€åˆ‡æ›äº‹ä»¶
            langSelect.addEventListener('change', (e) => {
                currentLang = e.target.value;
                updateUI(currentLang);
            });
        }

        // UI æ›´æ–° (I18N)
        function updateUI(lang) {
            const data = i18nData[lang];
            if (!data) return;

            // 1. æ›´æ–°éœæ…‹æ–‡å­—
            uiHeaderTitle.textContent = data.header;
            chatInput.placeholder = data.placeholder;
            sendBtn.textContent = data.send;

            // 2. é‡æ–°ç”¢ç”Ÿæ­¡è¿è¨Šæ¯ (æ¸…ç©ºè¨Šæ¯å€)
            messagesContainer.innerHTML = '';
            appendMessage(data.welcome, 'bot');

            // 3. é‡æ–°ç”¢ç”Ÿåœ–æ–‡é¸å–®
            const oldMenu = document.getElementById('richMenuWrapper');
            if (oldMenu) oldMenu.remove();
            renderRichMenuCarousel(data.richMenu);

            // 4. é‡æ–°ç”¢ç”Ÿå¿«é€ŸæŒ‰éˆ•
            renderQuickChips(data.chips);
        }

        function toggleChatWindow() {
            chatWindow.classList.toggle('active');
            // ç¢ºä¿é¸å–®å­˜åœ¨ (å¦‚æœè¢«æ¸…é™¤é)
            if (chatWindow.classList.contains('active') && !document.getElementById('richMenuWrapper')) {
                 const data = i18nData[currentLang];
                 renderRichMenuCarousel(data.richMenu);
            }
        }

        function renderRichMenuCarousel(menuData) {
            const wrapper = document.createElement('div'); wrapper.className = 'carousel-wrapper'; wrapper.id = 'richMenuWrapper';
            const container = document.createElement('div'); container.className = 'card-container'; container.id = 'richMenuContainer';
            
            menuData.forEach(card => {
                const div = document.createElement('div'); div.className = 'rich-card';
                let btns = '';
                card.actions.forEach(act => btns += `<button class="card-btn" onclick="handleQuestion('${act.question}')">${act.label}</button>`);
                div.innerHTML = `<div class="card-image">${card.imageIcon}</div><div class="card-title">${card.title}</div><div>${btns}</div>`;
                container.appendChild(div);
            });

            const left = document.createElement('button'); left.className = 'scroll-btn left'; left.innerHTML = '&lt;';
            left.onclick = () => container.scrollBy({left: -200, behavior: 'smooth'});
            const right = document.createElement('button'); right.className = 'scroll-btn right'; right.innerHTML = '&gt;';
            right.onclick = () => container.scrollBy({left: 200, behavior: 'smooth'});

            wrapper.append(left, container, right);
            messagesContainer.appendChild(wrapper);
        }

        function renderQuickChips(chipsData) {
            quickChipsContainer.innerHTML = '';
            chipsData.forEach(c => {
                const btn = document.createElement('button'); btn.className = 'quick-chip'; btn.textContent = c.label;
                btn.onclick = () => handleQuestion(c.question);
                quickChipsContainer.appendChild(btn);
            });
        }

        function handleQuestion(q) {
            appendMessage(q, 'user');
            const typingText = i18nData[currentLang].typing;
            showTyping(true, typingText);
            fetchAPI(q);
        }

        function handleSend() {
            const txt = chatInput.value.trim(); if(!txt) return;
            appendMessage(txt, 'user'); 
            chatInput.value = ''; 
            const typingText = i18nData[currentLang].typing;
            showTyping(true, typingText); 
            fetchAPI(txt);
        }

        function cleanMarkdown(text) {
            if (!text) return "";
            return text.replace(/\*\*(.*?)\*\*/g, '$1').replace(/\*(.*?)\*/g, '$1');
        }
        function formatLineBreaks(text) {
            if (!text) return "";
            return text.replace(/\n/g, '<br>');
        }

        function appendMessage(text, type) {
            const div = document.createElement('div');
            div.className = `message ${type}`;
            if (type === 'bot') {
                let cleanText = cleanMarkdown(text);
                let formattedHtml = formatLineBreaks(cleanText);
                div.innerHTML = formattedHtml;
            } else {
                div.textContent = text;
            }
            messagesContainer.appendChild(div);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTyping(show, text = "Thinking...") {
            const indicator = document.getElementById('typingIndicator');
            if (show && !indicator) {
                const div = document.createElement('div'); div.className = 'message bot typing';
                div.id = 'typingIndicator'; div.textContent = text;
                messagesContainer.appendChild(div);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            } else if (!show && indicator) {
                indicator.remove();
            }
        }

        function getLanguageInstruction(lang) {
            switch(lang) {
                case 'zh-TW': return " (è«‹ç”¨ç¹é«”ä¸­æ–‡å›ç­”)";
                case 'vi': return " (Please answer in Vietnamese)";
                case 'id': return " (Please answer in Indonesian)";
                case 'th': return " (Please answer in Thai)";
                case 'en': return " (Please answer in English)";
                default: return "";
            }
        }

        async function fetchAPI(msg) {
            // âš ï¸ è«‹ç¢ºèªæ‚¨çš„ Ngrok ç¶²å€æ˜¯å¦æ­£ç¢º
            const API_URL = "https://rainbowy-rumpless-ashley.ngrok-free.dev/rag-chat";
            
            const prompt = msg + getLanguageInstruction(currentLang);

            try {
                const res = await fetch(API_URL, {
                    method: 'POST', headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ question: prompt, language: currentLang })
                });
                const data = await res.json();
                showTyping(false);
                
                if (data.error) appendMessage(`Error: ${data.error}`, 'bot');
                else appendMessage(data.answer, 'bot');

            } catch (e) {
                showTyping(false);
                appendMessage("Network Error / Connection Failed.", 'bot');
            }
        }

        // é é¢è¼‰å…¥å®Œæˆå¾Œï¼Œåˆå§‹åŒ– Dashboard èˆ‡ Chat
        window.onload = function() {
            animateMarketCount(858939); 
            initChat(); 
        };
    </script>
</body>
</html>
