<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCMAI - ç§»è²¸å®—å¸«</title>
    <style>
        /* =========================================
           1. Dashboard æ¨£å¼ (æ ¸å¿ƒè®Šæ•¸)
           ========================================= */
        :root {
            /* --- Dashboard åŸæœ‰è®Šæ•¸ --- */
            --color-light-bg: #F8F9FA; 
            --color-card-bg: #FFFFFF; 
            --color-primary: #3B82F6; 
            --color-secondary: #60A5FA; 
            --color-text-dark: #344767; 
            --color-text-mid: #6C757D; 
            --color-border: #E2E8F0; 

            --color-status-success: #10B981; 
            --color-status-warning: #FBBF24; 
            --color-status-danger: #EF4444; 

            /* --- Chat Widget å°ˆç”¨è®Šæ•¸ --- */
            --chat-dark-bg: #111827;      
            --chat-card-bg: #1F2937;       
            --chat-primary: #3B82F6;       
            
            --chat-text-light: #F9FAFB;    
            --chat-text-dark: #1F2937;     
            --chat-text-dim: #9CA3AF;      
            
            --chat-bot-bubble: #374151;    
            --chat-user-text: #FFFFFF;     
            --chat-input-bg: #374151;      

            /* --- å¡ç‰‡å°ˆç”¨è®Šæ•¸ --- */
            --card-bg-white: #FFFFFF;      
            --card-border-light: #E5E7EB;  
            --card-hover-bg: #EFF6FF;      
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Inter', 'Segoe UI', 'Helvetica Neue', sans-serif;
            background-color: var(--color-light-bg);
            color: var(--color-text-dark);
            line-height: 1.6;
        }
        .container { max-width: 1300px; margin: 0 auto; padding: 0 20px; }

        /* --- Dashboard Header --- */
        header {
            background-color: var(--color-card-bg);
            padding: 15px 0;
            border-bottom: 1px solid var(--color-border);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            position: sticky; top: 0; z-index: 1000;
        }
        .logo {
            display: flex;
            align-items: center;
        }
        .logo img {
            height: 50px; 
            width: auto;
            display: block;
        }
        nav a { color: var(--color-text-mid); text-decoration: none; margin-left: 30px; transition: color 0.3s; }
        nav a:hover { color: var(--color-primary); }

        /* --- Dashboard Hero --- */
        .hero { padding: 80px 0 40px; text-align: center; background-color: var(--color-light-bg); }
        .hero h1 { font-size: 5em; color: var(--color-primary); margin-bottom: 10px; font-weight: 700; }
        .hero .subtitle { font-size: 1.8em; color: var(--color-text-dark); margin-bottom: 40px; }
        .hero p { font-size: 1.1em; color: var(--color-text-mid); max-width: 800px; margin: 0 auto 30px auto; }
        
        .cta-button {
            background-color: var(--color-primary); color: var(--color-card-bg);
            padding: 15px 40px; font-size: 1.2em; font-weight: bold;
            border: none; border-radius: 8px; cursor: pointer; text-decoration: none;
            transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: inline-block;
        }
        .cta-button:disabled {
            background-color: #9CA3AF;
            cursor: not-allowed;
            box-shadow: none;
        }
        .cta-button:hover:not(:disabled) {
            background-color: #2563EB; transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0,0,0,0.15);
        }

        /* --- Application Form Section --- */
        .app-form-section {
            background-color: #FFFFFF;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            margin-bottom: 40px;
            border: 1px solid var(--color-border);
        }
        .app-form-title {
            font-size: 1.5em; font-weight: 700; color: var(--color-text-dark);
            margin-bottom: 25px; border-bottom: 2px solid var(--color-primary); display: inline-block; padding-bottom: 5px;
        }
        .form-grid {
            display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;
        }
        .form-group { margin-bottom: 15px; text-align: left; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 8px; color: var(--color-text-dark); }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%; padding: 12px; border: 1px solid var(--color-border); border-radius: 8px;
            font-size: 1em; transition: border-color 0.3s; font-family: inherit;
        }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none; border-color: var(--color-primary);
        }
        
        /* Open Banking Button Style */
        .bank-connect-box {
            grid-column: 1 / -1;
            background-color: #F3F4F6;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 1px dashed #9CA3AF;
            margin-top: 10px;
        }
        .btn-connect-bank {
            background-color: #10B981; /* Green for trust */
            color: white; padding: 10px 25px; border-radius: 6px; border: none; cursor: pointer;
            font-size: 1em; font-weight: bold; display: inline-flex; align-items: center; gap: 8px;
            transition: background 0.3s;
        }
        .btn-connect-bank:hover { background-color: #059669; }
        .btn-connect-bank.connected {
            background-color: #E5E7EB; color: #374151; cursor: default;
        }
        .connection-status { margin-top: 10px; font-weight: bold; color: var(--color-text-mid); min-height: 24px;}


        /* --- Dashboard Grid Layout --- */
        .dashboard-section { padding: 50px 0; background-color: var(--color-light-bg); }
        .dashboard-title { text-align: center; font-size: 2.2em; color: var(--color-text-dark); margin-bottom: 40px; font-weight: 600; }
        
        /* Modified Grid for Summary */
        .dashboard-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; }
        
        .module-card {
            background-color: var(--color-card-bg); padding: 20px;
            border-radius: 12px; border: 1px solid var(--color-border);
            box-shadow: 0 4px 10px rgba(0,0,0,0.08); min-height: 300px;
            display: flex; flex-direction: column; justify-content: space-between;
        }
        .module-card h3 {
            color: var(--color-primary); font-size: 1.4em;
            border-bottom: 1px solid var(--color-border); padding-bottom: 10px; margin-bottom: 20px; font-weight: 600;
        }

        /* Summary Box */
        .summary-box {
            grid-column: 1 / -1; /* Span full width */
            background-color: #EFF6FF;
            border: 1px solid #BFDBFE;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none; /* Hidden by default */
        }
        .summary-title { font-weight: bold; color: var(--color-primary); margin-bottom: 10px; font-size: 1.2em; }
        .summary-text { color: var(--color-text-dark); line-height: 1.6; }

        /* --- Specific Modules --- */
        .main-module { text-align: center; border: 2px solid var(--color-primary); box-shadow: 0 8px 15px rgba(59, 130, 246, 0.2); }
        .mwcs-score { font-size: 4em; font-weight: bold; color: var(--color-text-mid); margin-top: 10px; transition: color 0.5s; }
        .mwcs-label { color: var(--color-text-mid); font-size: 1em; }
        
        .rag-module h4 { color: var(--color-text-dark); margin-top: 15px; font-weight: 600; }
        .rag-status { color: var(--color-status-success); font-size: 2em; margin-top: 10px; font-weight: bold; }
        
        .pfcf-value { font-size: 2.5em; font-weight: bold; color: var(--color-text-mid); margin-top: 10px; }
        .pfcf-unit { color: var(--color-text-mid); font-size: 1.2em; }

        /* --- Matrix Section --- */
        .matrix-section { padding: 80px 0; text-align: center; background-color: var(--color-light-bg); }
        .matrix-section h2 { font-size: 2.5em; color: var(--color-text-dark); margin-bottom: 40px; font-weight: 600; }
        .matrix-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
        .matrix-item {
            background-color: var(--color-card-bg); padding: 25px;
            border-left: 4px solid var(--color-secondary); text-align: left;
            border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.06);
        }
        .matrix-item h4 { color: var(--color-primary); margin-bottom: 10px; font-weight: 600; }
        .matrix-item p { font-size: 1em; color: var(--color-text-mid); }

        /* --- About Us & Video Section --- */
        .about-section {
            padding: 100px 0;
            background-color: #FFFFFF;
            text-align: center;
            border-top: 1px solid var(--color-border);
        }
        .about-section h2 {
            font-size: 2.5em; color: var(--color-text-dark); margin-bottom: 20px; font-weight: 700;
        }
        .video-container {
            position: relative; width: 100%; max-width: 900px; margin: 0 auto;
            padding-bottom: 56.25%; height: 0; border-radius: 15px; overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.15); background-color: #000;
        }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }

        /* --- Team Section --- */
        .team-wrapper { margin-top: 80px; text-align: center; }
        .team-title {
            font-size: 2em; color: var(--color-text-dark); margin-bottom: 40px; font-weight: 700;
            letter-spacing: 2px; position: relative; display: inline-block;
        }
        .team-title::after {
            content: ''; display: block; width: 60px; height: 4px; background-color: var(--color-primary);
            margin: 10px auto 0; border-radius: 2px;
        }
        .team-grid {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px;
            max-width: 1200px; margin: 0 auto; padding: 0 20px;
        }
        .team-card {
            background: #FFFFFF; border-radius: 20px; padding: 40px 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08); transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid var(--color-border); position: relative; overflow: hidden;
        }
        .team-card:hover {
            transform: translateY(-10px); box-shadow: 0 20px 40px rgba(59, 130, 246, 0.15);
            border-color: var(--color-primary);
        }
        .member-avatar-box { width: 150px; height: 150px; margin: 0 auto 25px; position: relative; }
        .member-avatar {
            width: 100%; height: 100%; object-fit: cover; border-radius: 50%;
            border: 4px solid var(--color-light-bg); box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .member-name { font-size: 1.8em; font-weight: 800; color: var(--color-text-dark); margin-bottom: 5px; }
        .member-title {
            color: var(--color-primary); font-weight: 700; font-size: 0.95em; text-transform: uppercase;
            letter-spacing: 1px; margin-bottom: 20px; background: rgba(59, 130, 246, 0.1);
            display: inline-block; padding: 5px 15px; border-radius: 20px;
        }
        .member-desc { color: var(--color-text-mid); font-size: 1em; line-height: 1.6; }

        /* --- Footer --- */
        .contact-cta-section { padding: 80px 0; background-color: var(--color-light-bg); text-align: center; border-top: 1px solid var(--color-border); }
        .contact-cta-section h2 { color: var(--color-primary); font-size: 2.5em; margin-bottom: 20px; font-weight: 700; }
        .contact-cta-section p { font-size: 1.3em; color: var(--color-text-mid); max-width: 900px; margin: 0 auto 30px auto; }
        footer { background-color: var(--color-text-dark); color: var(--color-light-bg); padding: 30px 0; margin-top: 50px; text-align: center; font-size: 0.9em; }

        /* =========================================
           2. Chat Widget æ¨£å¼ (ä¿æŒä¸è®Š)
           ========================================= */
        .chat-widget-trigger {
            position: fixed; bottom: 30px; right: 30px;
            background-color: var(--chat-primary); color: #fff;
            border: none; border-radius: 50%; width: 60px; height: 60px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
            z-index: 9998; transition: transform 0.3s;
        }
        .chat-widget-trigger:hover { transform: scale(1.1); }
        .chat-widget-trigger svg { width: 32px; height: 32px; fill: currentColor; }

        .chat-widget-window {
            position: fixed; bottom: 100px; right: 30px;
            width: 380px; max-width: 90vw; height: 600px;
            background-color: var(--chat-card-bg); border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex; flex-direction: column; overflow: hidden;
            z-index: 9999; transform: translateY(20px); opacity: 0; visibility: hidden;
            transition: all 0.3s ease;
            font-family: 'Segoe UI', sans-serif;
        }
        .chat-widget-window.active { transform: translateY(0); opacity: 1; visibility: visible; }
        .chat-header {
            background-color: var(--chat-dark-bg); padding: 15px 20px;
            color: var(--chat-text-light); font-weight: bold;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .close-btn { background: none; border: none; color: var(--chat-text-dim); font-size: 20px; cursor: pointer; }
        .close-btn:hover { color: #fff; }
        .chat-messages {
            flex-grow: 1; padding: 20px; overflow-y: auto;
            background-color: var(--chat-card-bg); display: flex; flex-direction: column;
        }
        .message {
            margin-bottom: 15px; max-width: 85%; padding: 12px 16px;
            border-radius: 12px; line-height: 1.6; word-wrap: break-word; font-size: 0.95em;
        }
        .message.user { background-color: var(--chat-primary); color: var(--chat-user-text); margin-left: auto; border-bottom-right-radius: 2px; }
        .message.bot { background-color: var(--chat-bot-bubble); color: var(--chat-text-light); margin-right: auto; border-bottom-left-radius: 2px; }

        /* ...ä¿ç•™åŸæœ¬ Chat å…¶ä»–æ¨£å¼... */
        .carousel-wrapper { position: relative; margin-bottom: 15px; width: 100%; }
        .card-container { display: flex; gap: 12px; overflow-x: auto; padding: 5px; scroll-behavior: smooth; scrollbar-width: none; align-items: flex-start; }
        .card-container::-webkit-scrollbar { display: none; }
        .rich-card { min-width: 210px; max-width: 220px; background-color: var(--card-bg-white); border-radius: 10px; overflow: hidden; box-shadow: 0 4px 8px rgba(0,0,0,0.2); border: 1px solid #4B5563; flex-shrink: 0; height: fit-content; }
        .card-image { width: 100%; height: 100px; display: flex; align-items: center; justify-content: center; background-color: #E0F2FE; color: var(--chat-primary); font-size: 2.5em; }
        .card-title { padding: 10px; color: var(--chat-text-dark); font-weight: bold; text-align: center; border-bottom: 1px solid var(--card-border-light); background-color: var(--card-bg-white); }
        .card-btn { display: block; width: 100%; padding: 12px 15px; background: none; border: none; border-bottom: 1px solid var(--card-border-light); color: var(--chat-text-dark); cursor: pointer; text-align: left; line-height: 1.4; font-size: 0.9em; transition: background 0.2s; }
        .card-btn:last-child { border-bottom: none; }
        .card-btn:hover { background-color: var(--card-hover-bg); color: var(--chat-primary); }
        .scroll-btn { position: absolute; top: 50%; transform: translateY(-50%); width: 28px; height: 28px; border-radius: 50%; border: none; background-color: rgba(59, 130, 246, 0.8); color: #fff; cursor: pointer; z-index: 10; }
        .scroll-btn.left { left: 0; } .scroll-btn.right { right: 0; }
        .quick-menu-area { padding: 10px 15px; background-color: var(--chat-dark-bg); border-top: 1px solid rgba(255,255,255,0.1); }
        .quick-chips-container { display: flex; gap: 8px; overflow-x: auto; scrollbar-width: none; }
        .quick-chips-container::-webkit-scrollbar { display: none; }
        .quick-chip { white-space: nowrap; padding: 6px 14px; border-radius: 20px; background: rgba(255,255,255,0.05); border: 1px solid var(--chat-primary); color: var(--chat-primary); font-size: 0.85em; cursor: pointer; }
        .quick-chip:hover { background-color: var(--chat-primary); color: #fff; }
        .input-toolbar { background-color: var(--chat-dark-bg); padding: 0 15px 15px 15px; }
        .language-row { display: flex; align-items: center; margin-bottom: 8px; font-size: 0.85em; color: var(--chat-text-dim); }
        .lang-select { background-color: var(--chat-input-bg); border: 1px solid #4B5563; color: var(--chat-text-light); border-radius: 4px; padding: 2px 5px; margin-left: 8px; cursor: pointer; }
        .chat-input-area { display: flex; gap: 10px; }
        #chatInput { flex-grow: 1; border: 1px solid #4B5563; border-radius: 20px; padding: 10px 15px; background-color: var(--chat-input-bg); color: var(--chat-text-light); font-size: 1em; }
        #chatInput:focus { outline: none; border-color: var(--chat-primary); }
        #sendBtn { border: none; background-color: var(--chat-primary); color: #fff; padding: 0 20px; border-radius: 20px; font-weight: bold; cursor: pointer; white-space: nowrap; }
        #sendBtn:hover { background-color: #2563EB; }
        .message.typing { color: var(--chat-text-dim); font-style: italic; border:none; box-shadow:none; background:none;}
        
        /* RWD */
        @media screen and (max-width: 768px) {
            nav { flex-direction: column; align-items: center !important; gap: 15px; }
            nav div:last-child { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 10px; }
            nav a { margin: 0 8px; font-size: 0.9em; }
            .logo img { height: 40px; }
            .hero { padding: 60px 0 40px; }
            .hero h1 { font-size: 3em; }
            .form-grid { grid-template-columns: 1fr; } /* æ‰‹æ©Ÿç‰ˆè¡¨å–®è®Šå–®æ¬„ */
            .dashboard-grid, .matrix-grid, .team-grid { grid-template-columns: 1fr !important; gap: 20px; }
            .chat-widget-window { width: 92%; right: 4%; left: 4%; bottom: 85px; height: 70vh; }
            .mwcs-score { font-size: 3em; }
        }
    </style>
</head>
<body>

    <header>
        <div class="container">
            <nav style="display: flex; justify-content: space-between; align-items: center;">
                <div class="logo">
                    <img src="MCMAI.png" alt="MCMAI Logo">
                </div>
                <div>
                    <a href="#dashboard">AI å„€è¡¨æ¿</a>
                    <a href="#matrix">å„ªå‹¢çŸ©é™£</a>
                    <a href="#about">é—œæ–¼æˆ‘å€‘</a>
                    <a href="#contact">è¯çµ¡æ´½è©¢</a>
                </div>
            </nav>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <p style="font-size: 1.25em; font-weight: 600; color: var(--color-text-mid); margin-bottom: -10px; letter-spacing: 1px;">
                æˆªæ­¢ç›®å‰å…¨å°å¤–ç±ç§»å·¥ç¸½äººæ•¸
            </p>
            <h1 style="display: flex; justify-content: center; align-items: baseline; gap: 10px;">
                <span id="marketCount">858,939</span>
                <span style="font-size: 0.4em; color: var(--color-text-mid);">äºº</span>
            </h1> 
            <div class="subtitle">ç§»å·¥å¾µä¿¡è—æµ·å¸‚å ´ | å°å…¥ AI é¢¨æ§èˆ‡å¤šèªè¨€æ™ºèƒ½å®¢æœ</div>
            <p>
                ã€Œç§»è²¸å®—å¸«ã€æä¾› B2B AI é¢¨æ§å³æœå‹™ï¼Œé€éå¤šæºæ›¿ä»£æ•¸æ“šèšåˆ(åŒ¯æ¬¾ã€æ¶ˆè²»ã€è¡Œç‚º...)ï¼Œç‚ºæ‚¨çš„é‡‘èç”¢å“è³¦èƒ½ã€‚
            </p>
            <a href="javascript:void(0);" class="cta-button" onclick="scrollToDashboard()">
                å•Ÿå‹•ç”³è«‹æ¨¡æ“¬ DEMO
            </a>
        </div>
    </section>

    <div class="container" id="dashboard" style="margin-top: 40px;">
        <div class="app-form-section">
            <div class="app-form-title">Step 1: ç”³è«‹äººè³‡æ–™æ¨¡æ“¬ (API Input)</div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label for="inputName">ç”³è«‹äººå§“å / Name</label>
                    <input type="text" id="inputName" placeholder="ä¾‹å¦‚: Nguyen Van A">
                </div>
                <div class="form-group">
                    <label for="inputJob">è·æ¥­ / Occupation</label>
                    <input type="text" id="inputJob" placeholder="ä¾‹å¦‚: é›»å­å» ä½œæ¥­å“¡">
                </div>
                <div class="form-group">
                    <label for="inputAmount">é è¨ˆè²¸æ¬¾é‡‘é¡ (NTD)</label>
                    <input type="number" id="inputAmount" placeholder="ä¾‹å¦‚: 50000" step="1000">
                </div>
                
                <div class="form-group">
                    <label for="inputTerm">è²¸æ¬¾æœŸæ•¸ (æœˆ) / Term</label>
                    <select id="inputTerm">
                        <option value="6">6 æœŸ (Months)</option>
                        <option value="12" selected>12 æœŸ (Months)</option>
                        <option value="24">24 æœŸ (Months)</option>
                        <option value="36">36 æœŸ (Months)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="inputReason">è²¸æ¬¾ç”¨é€” / Reason</label>
                    <select id="inputReason">
                        <option value="family">å®¶åº­æ€¥ç”¨ (Family Emergency)</option>
                        <option value="medical">é†«ç™‚æ”¯å‡º (Medical)</option>
                        <option value="education">æ•™è‚²é€²ä¿® (Education)</option>
                        <option value="business">å°é¡å‰µæ¥­ (Small Business)</option>
                        <option value="travel">è¿”é„‰æ—…è²» (Travel)</option>
                        <option value="other">å…¶ä»– (Other)</option>
                    </select>
                </div>

                <div class="form-group" style="grid-column: 1 / -1;">
                    <label for="inputDetail">è²¸æ¬¾åŸå› è©³ç´°èªªæ˜ / Detailed Reason</label>
                    <textarea id="inputDetail" rows="2" placeholder="è«‹è©³ç´°èªªæ˜è³‡é‡‘ç”¨é€”... (ä¾‹å¦‚: å®¶ä¸­å±‹é ‚ä¿®ç¹•æ€¥éœ€)"></textarea>
                </div>

                <div class="bank-connect-box">
                    <p style="margin-bottom: 15px; color: var(--color-text-mid);">
                        è«‹åŒæ„æˆæ¬Š AI å¼•æ“å­˜å–æ‚¨çš„è–ªè½‰èˆ‡æ¶ˆè²»ç´€éŒ„ä»¥é€²è¡Œä¿¡ç”¨è©•åˆ†ã€‚
                        <br><small>(æ­¤ç‚ºå‰ç«¯ Demo ç•«é¢ï¼Œä¸æ¶‰åŠçœŸå¯¦éŠ€è¡Œé€£ç·š)</small>
                    </p>
                    <button class="btn-connect-bank" id="btnConnectBank" onclick="simulateBankConnection()">
                        <span id="btnIcon">ğŸ”—</span> 
                        <span id="btnText">åŒæ„ä¸¦é€£çµéŠ€è¡Œå¸³æˆ¶ (Open Banking)</span>
                    </button>
                    <div class="connection-status" id="connectionStatus"></div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="cta-button" id="btnRunInference" onclick="runFullInference()" disabled>
                    Step 2: å•Ÿå‹• AI é¢¨æ§æ¨è«–
                </button>
                <p style="margin-top: 10px; font-size: 0.9em; color: var(--color-text-mid);">
                    (éœ€å…ˆå®ŒæˆéŠ€è¡Œé€£å‹•æ–¹å¯åŸ·è¡Œ)
                </p>
            </div>
        </div>
    </div>

    <section class="dashboard-section" style="padding-top: 20px;">
        <div class="container">
            <div class="dashboard-title">
                ç³»çµ±ç‹€æ…‹ï¼šAI å¼•æ“å³æ™‚æ¨è«– (API Output)
            </div>
            
            <div class="dashboard-grid">
                
                <div class="module-card main-module">
                    <h3>ç§»å·¥ä¿¡ç”¨è©•åˆ† (MWCS)</h3>
                    <div class="mwcs-score" id="mwcsScore">--</div>
                    <div class="mwcs-label">Migrant Worker Credit Score</div>
                    <p style="margin-top: 20px; color: var(--color-text-mid);">
                        ç¶œåˆåŒ¯æ¬¾è¦å¾‹ã€å·¥ä½œç©©å®šåº¦èˆ‡æ¶ˆè²»ç‰¹å¾µä¹‹å‹•æ…‹è©•åˆ†ã€‚
                    </p>
                </div>

                <div class="module-card pfcf-module">
                    <h3>PFCF é‚„æ¬¾èƒ½åŠ›é æ¸¬</h3>
                    <div class="pfcf-value" id="pfcValue">--</div>
                    <div class="pfcf-unit" id="pfcUnit">NTD / æœˆ (å»ºè­°ä¸Šé™)</div>
                    <p style="margin-top: 20px; font-size: 0.9em; color: var(--color-text-mid);">
                        æ‰£é™¤ç”Ÿæ´»å¿…éœ€æ”¯å‡ºå¾Œçš„çœŸå¯¦è‡ªç”±ç¾é‡‘æµï¼Œä½œç‚ºæ”¾æ¬¾é¡åº¦ä¾æ“šã€‚
                    </p>
                </div>

                <div class="module-card rag-module">
                    <div>
                        <h3>AI å®¢æœç‹€æ…‹</h3>
                        <div class="rag-status" id="ragStatus">ONLINE</div>
                        <div class="mwcs-label">å¤šèªè¨€æœå‹™ 24/7 é‹ä½œä¸­</div>
                        <h4 style="margin-top: 20px;">æ•ˆç›ŠæŒ‡æ¨™ï¼š</h4>
                        <p style="font-size: 0.9em; color: var(--color-text-mid);">
                            - é™ä½ 80% äººåŠ›å®¢æœæˆæœ¬<br>
                            - æ”¯æ´å°ã€è¶Šã€æ³°ã€è‹±ã€ä¸­
                        </p>
                    </div>
                    <button class="cta-button" style="margin-top: 20px; padding: 10px 0; font-size: 1em; width: 100%; background-color: var(--color-text-dark);" onclick="toggleChatWindow()">
                        ğŸ’¬ é–‹å•Ÿå®¢æœè¦–çª—
                    </button>
                </div>
                
                <div class="summary-box" id="summaryBox">
                    <div class="summary-title">ğŸ“ AI é¢¨æ§ç¸½å¯©æ ¸å ±å‘Š (Auto-Generated)</div>
                    <div class="summary-text" id="summaryText">
                        ç­‰å¾…æ¨è«–çµæœ...
                    </div>
                </div>

            </div>
        </div>
    </section>
    
    <section class="matrix-section" id="matrix">
        <div class="container">
            <h2>B2B åˆä½œå„ªå‹¢çŸ©é™£</h2>
            <div class="matrix-grid">
                <div class="matrix-item">
                    <h4>è§£é–æ–°å®¢ç¾¤</h4>
                    <p>æœå‹™éŠ€è¡Œç„¡æ³•æœå‹™çš„ 85 è¬å®¢ç¾¤ï¼Œç‰¹åˆ¥æ˜¯ç¤¾ç¦ç§»å·¥ã€‚</p>
                </div>
                <div class="matrix-item">
                    <h4>ç²¾æº–å®šåƒ¹</h4>
                    <p>PFCF æ¨¡å‹å¯¦ç¾ç²¾ç®—é‚„æ¬¾èƒ½åŠ›ï¼Œè®“æ‚¨èƒ½çµ¦äºˆå…¬å¹³åˆ©ç‡ã€‚</p>
                </div>
                <div class="matrix-item">
                    <h4>å³æ™‚é¢¨éšªé è­¦</h4>
                    <p>AI è¡Œç‚ºåµæ¸¬ï¼Œä¸»å‹•é è­¦åŒ¯æ¬¾ä¸­æ–·ç­‰é«˜é¢¨éšªäº‹ä»¶ï¼Œé™ä½å‘†å¸³ã€‚</p>
                </div>
                <div class="matrix-item">
                    <h4>é™ä½ç‡Ÿé‹æˆæœ¬</h4>
                    <p>RAG æ™ºèƒ½å®¢æœå¯¦ç¾å¤šèªè¨€æœå‹™è‡ªå‹•åŒ–ï¼Œå„ªåŒ–ç‡Ÿé‹æ•ˆç‡ã€‚</p>
                </div>
                <div class="matrix-item">
                    <h4>åˆè¦é€æ˜</h4>
                    <p>æä¾›åŸºæ–¼ SHAP çš„å¯è§£é‡‹æ±ºç­–ï¼Œè¼•é¬†é€šéå…§éƒ¨å¯©æ ¸èˆ‡ç›£ç®¡ã€‚</p>
                </div>
                <div class="matrix-item">
                    <h4>å¿«é€Ÿéƒ¨ç½²</h4>
                    <p>æ¨™æº–åŒ– API æ¨¡çµ„ï¼Œå¯¦ç¾é¢¨æ§èƒ½åŠ›å¿«é€ŸåµŒå…¥èˆ‡ä¸Šç·šã€‚</p>
                </div>
            </div>
        </div>
    </section>

    <section class="about-section" id="about">
        <div class="container">
            <h2>é—œæ–¼æˆ‘å€‘</h2>
            <p>æˆ‘å€‘è‡´åŠ›æ–¼ç”¨ AI æŠ€è¡“è§£æ±ºã€Œé‡‘èæ’æ–¥ã€ï¼Œå”åŠ©å¤¥ä¼´æ‹“å±•è—æµ·å¸‚å ´ã€‚</p>
            
            <div class="video-container">
                <iframe 
                  width="560" height="315" src="https://www.youtube.com/embed/Qn9vKM_2hAA" 
                  title="MCMAI åœ˜éšŠä»‹ç´¹" frameborder="0" 
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                  allowfullscreen>
                </iframe>
            </div>

            <div class="team-wrapper">
                <div class="team-title">å®—å¸«æ®¿å ‚</div>
                <div class="team-grid">
                    <div class="team-card">
                        <div class="member-avatar-box"><img src="./huang.png" alt="é»ƒè–å‰›" class="member-avatar"></div>
                        <div class="member-name">é»ƒè–å‰›</div>
                        <div class="member-title">CEO | åŸ·è¡Œé•·</div>
                        <p class="member-desc">æ“˜ç•«ã€Œç§»è²¸å®—å¸«ã€å•†æ¥­ç‰ˆåœ–ï¼Œæ–¼é‡‘èå¸‚å ´ä¸­ï¼Œé‹ç”¨æ›¿ä»£æ•¸æ“šé–‹é—¢æ™®æƒ é‡‘èçš„è—æµ·ã€‚</p>
                    </div>
                    <div class="team-card">
                        <div class="member-avatar-box"><img src="./livingroom.png" alt="ææ—»å„’" class="member-avatar"></div>
                        <div class="member-name">ææ—»å„’</div>
                        <div class="member-title">CTO | æŠ€è¡“é•·</div>
                        <p class="member-desc">è² è²¬æœ¬è¨ˆç•«ä¹‹ AI ä¿¡ç”¨è©•ä¼°æ¨¡å‹å»ºç½®ã€PFCF(è‡ªç”±ç¾é‡‘æµé‡)é‹ç®—é‚è¼¯ã€æ›¿ä»£è³‡æ–™åˆ†ææ©Ÿåˆ¶ã€‚</p>
                    </div>
                    <div class="team-card">
                        <div class="member-avatar-box"><img src="./yixuan.png" alt="é™³é€¸è»’" class="member-avatar"></div>
                        <div class="member-name">é™³é€¸è»’</div>
                        <div class="member-title">CPO | ç”¢å“é•·</div>
                        <p class="member-desc">è² è²¬å¸‚å ´éœ€æ±‚åˆ†æã€ä½¿ç”¨è€…æµç¨‹è¨­è¨ˆèˆ‡ B2B åˆä½œæ¨¡å¼è¦åŠƒï¼Œå„ªåŒ–è·¨æ–‡åŒ–ä»‹é¢é«”é©—ã€‚</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="contact-cta-section" id="contact">
        <div class="container">
            <h2>æº–å‚™å¥½å•Ÿå‹•æ‚¨çš„æ–°ç‡Ÿæ”¶æ›²ç·šäº†å—ï¼Ÿ</h2>
            <p>æˆ‘å€‘æ˜¯æŠ€è¡“è³¦èƒ½å¹³å°ï¼Œä¸æŒæœ‰é¢¨éšªã€‚API å‘¼å«è²»ã€æ¨¡å‹è¨‚é–±è²»ï¼Œæ¨¡å¼æ¸…æ™°ã€‚</p>
            <a href="mailto: s310751030@gm.ntpu.edu.tw" class="cta-button">è¯çµ¡æ¥­å‹™æ´½è©¢</a>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>MIGRANT MASTER_AI | å°ˆæ³¨ç§»å·¥é‡‘èç§‘æŠ€å‰µæ–°</p>
            <p>Email: s310751030@gm.ntpu.edu.tw</p>
        </div>
    </footer>

    <div class="chat-widget-window" id="chatWindow">
        <div class="chat-header">
            <span id="uiHeaderTitle">AIå€Ÿè²¸æ™ºæ…§å®¢æœ</span>
            <button class="close-btn" id="closeBtn">&times;</button>
        </div>
        <div class="chat-messages" id="messagesContainer"></div>
        <div class="quick-menu-area"><div class="quick-chips-container" id="quickChipsContainer"></div></div>
        <div class="input-toolbar">
            <div class="language-row">
                <label for="langSelect">Language:</label>
                <select id="langSelect" class="lang-select">
                    <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                    <option value="vi">Tiáº¿ng Viá»‡t</option>
                    <option value="id">Bahasa Indonesia</option>
                    <option value="th">à¸ à¸²à¸©à¸²à¹„à¸—à¸¢</option>
                    <option value="en">English</option>
                </select>
            </div>
            <div class="chat-input-area">
                <input type="text" id="chatInput" placeholder="è¼¸å…¥æ‚¨çš„å•é¡Œ...">
                <button id="sendBtn">å‚³é€</button>
            </div>
        </div>
    </div>
    <button class="chat-widget-trigger" id="chatTrigger">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 9V7c0-1.1-.9-2-2-2h-3c0-1.66-1.34-3-3-3S9 3.34 9 5H6c-1.1 0-2 .9-2 2v2c-1.66 0-3 1.34-3 3s1.34 3 3 3v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c1.66 0 3-1.34 3-3s-1.34-3-3-3zM7.5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5zm9 0c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5z"/></svg>
    </button>

    <script>
        // ----------------------------------------------------
        // 1. é‚è¼¯æ§åˆ¶ - éŠ€è¡Œé€£ç·šèˆ‡æ¨è«–
        // ----------------------------------------------------
        let isBankConnected = false;

        function simulateBankConnection() {
            const btn = document.getElementById('btnConnectBank');
            const status = document.getElementById('connectionStatus');
            const runBtn = document.getElementById('btnRunInference');
            const icon = document.getElementById('btnIcon');
            const text = document.getElementById('btnText');

            if (isBankConnected) return; // å·²ç¶“é€£ç·šå°±ä¸ç”¨å†åš

            // æ¨¡æ“¬ Loading
            btn.disabled = true;
            text.textContent = "æ­£åœ¨å®‰å…¨é€£ç·šè‡³éŠ€è¡Œ API...";
            icon.textContent = "â³";
            
            setTimeout(() => {
                isBankConnected = true;
                btn.classList.add('connected');
                // ä¿®æ”¹ï¼šç§»é™¤æ‹¬è™Ÿå‚™è¨»
                text.textContent = "å·²å®Œæˆå¸³æˆ¶é€£å‹•";
                icon.textContent = "âœ…";
                // ä¿®æ”¹ï¼šå¢åŠ æ›´å¤šè©³ç´°å…§å®¹
                status.textContent = "å·²æˆåŠŸè®€å–ï¼šè–ªè½‰ç´€éŒ„ (12å€‹æœˆ)ã€é›»ä¿¡è²»ç¹³æ¬¾æ­·å²ã€æ—¥å¸¸æ¶ˆè²»æ˜ç´°ã€è·¨å¢ƒåŒ¯æ¬¾è¦å¾‹ã€å±…ç•™è­‰æ•ˆæœŸ...";
                status.style.color = "var(--color-status-success)";
                
                // å•Ÿç”¨æ¨è«–æŒ‰éˆ•
                runBtn.disabled = false;
                runBtn.style.backgroundColor = "var(--color-primary)";
            }, 1500);
        }

        function runFullInference() {
            // å–å¾—è¼¸å…¥å€¼
            const name = document.getElementById('inputName').value || "ç”³è«‹äºº";
            const job = document.getElementById('inputJob').value || "æœªçŸ¥è·æ¥­";
            const amount = document.getElementById('inputAmount').value;
            const term = document.getElementById('inputTerm').value; // å–å¾—æœŸæ•¸
            const reasonSelect = document.getElementById('inputReason');
            const reason = reasonSelect.options[reasonSelect.selectedIndex].text;
            const detail = document.getElementById('inputDetail').value || "ç„¡è©³ç´°èªªæ˜"; // å–å¾—è©³ç´°èªªæ˜

            // UI ç‹€æ…‹ï¼šè™•ç†ä¸­
            const runBtn = document.getElementById('btnRunInference');
            const mwcsElement = document.getElementById('mwcsScore');
            const pfcElement = document.getElementById('pfcValue');
            const summaryBox = document.getElementById('summaryBox');
            const summaryText = document.getElementById('summaryText');

            runBtn.disabled = true;
            runBtn.textContent = 'AI æ¨¡å‹é‹ç®—ä¸­ (Random Forest)...';
            mwcsElement.textContent = '...';
            pfcElement.textContent = '...';
            mwcsElement.style.color = 'var(--color-secondary)';
            summaryBox.style.display = 'none';

            // æ¨¡æ“¬å»¶é²
            setTimeout(() => {
                // éš¨æ©Ÿç”Ÿæˆåˆ†æ•¸
                const simulatedPD = Math.random() * 0.15 + 0.05; 
                const mwcsScore = Math.round(100 * (1 - simulatedPD)); 
                // éš¨æ©Ÿç”Ÿæˆ PFCF (8000 ~ 20000)
                const pfcValue = Math.floor(Math.random() * (20000 - 8000 + 1) + 8000); 

                // æ›´æ–°æ•¸å­—
                mwcsElement.textContent = mwcsScore;
                pfcElement.textContent = pfcValue.toLocaleString(); 

                // è¨­å®šé¡è‰²
                let scoreColor, conclusion;
                if (mwcsScore >= 80) {
                    scoreColor = 'var(--color-status-success)';
                    conclusion = `<span style="color:var(--color-status-success); font-weight:bold;">å¼·çƒˆå»ºè­°æ ¸å‡† (High Approval)</span>ã€‚è©²å®¢æˆ¶åŒ¯æ¬¾è¡Œç‚ºæ¥µåº¦è¦å¾‹ï¼Œä¸”å…·å‚™é«˜æ–¼å¹³å‡çš„ç¾é‡‘æµç•™å­˜ç‡ã€‚`;
                } else if (mwcsScore >= 60) {
                    scoreColor = 'var(--color-status-warning)';
                    conclusion = `<span style="color:var(--color-status-warning); font-weight:bold;">å»ºè­°æ ¸å‡† (Standard)</span>ã€‚é¢¨éšªå±¬æ¨™æº–ç¯„åœï¼Œå»ºè­°é©ç”¨æ¨™æº–åˆ©ç‡æ–¹æ¡ˆã€‚`;
                } else {
                    scoreColor = 'var(--color-status-danger)';
                    conclusion = `<span style="color:var(--color-status-danger); font-weight:bold;">é«˜é¢¨éšª (High Risk)</span>ã€‚åµæ¸¬åˆ°è¿‘æœŸæœ‰å¤šç­†å°é¡å€Ÿè²¸æˆ–åŒ¯æ¬¾ä¸­æ–·è·¡è±¡ï¼Œå»ºè­°äººå·¥è¤‡å¯©æˆ–å©‰æ‹’ã€‚`;
                }

                mwcsElement.style.color = scoreColor;

                // ç”Ÿæˆç¸½çµå ±å‘Š (æ•´åˆæ–°æ¬„ä½)
                const report = `
                    <strong>ã€AI å¾µä¿¡å¯©æ ¸çµæœã€‘</strong><br>
                    ç”³è«‹äººï¼š${name} (${job})<br>
                    ç”³è«‹æ–¹æ¡ˆï¼šNTD ${amount ? amount : 'æœªå¡«å¯«'} (åˆ† ${term} æœŸ)<br>
                    è³‡é‡‘ç”¨é€”ï¼š${reason}<br>
                    è©³ç´°èªªæ˜ï¼š<span style="color:var(--color-text-mid);">${detail}</span><br>
                    --------------------------------------------------<br>
                    ç¶“ AI åˆ†æå…¶ 12 å€‹æœˆæ›¿ä»£æ•¸æ“š(è–ªè½‰/æ¶ˆè²»/é›»ä¿¡è²»)ï¼ŒMWCS è©•åˆ†ç‚º <strong>${mwcsScore}</strong> åˆ†ã€‚<br>
                    PFCF æ¨¡å‹è¨ˆç®—å…¶æ¯æœˆçœŸå¯¦è‡ªç”±ç¾é‡‘æµç´„ç‚º NTD ${pfcValue.toLocaleString()}ï¼Œè¶³ä»¥è¦†è“‹æœ¬ç­†è²¸æ¬¾ä¹‹æœˆä»˜é‡‘ã€‚<br>
                    <br>
                    <strong>æœ€çµ‚çµè«–ï¼š</strong>${conclusion}
                `;
                
                summaryText.innerHTML = report;
                summaryBox.style.display = 'block'; // é¡¯ç¤ºå ±å‘Šå€

                // æ¢å¾©æŒ‰éˆ•
                runBtn.disabled = false;
                runBtn.textContent = 'é‡æ–°åŸ·è¡Œ AI æ¨è«–';
                
                // è‡ªå‹•æ²å‹•åˆ°çµæœå€
                document.querySelector('.dashboard-section').scrollIntoView({ behavior: 'smooth' });

            }, 2500);
        }

        function scrollToDashboard() {
            document.getElementById('dashboard').scrollIntoView({ behavior: 'smooth' });
        }
        
        function animateMarketCount(targetValue) {
            const element = document.getElementById('marketCount');
            let startValue = 0; const duration = 2000; const startTime = performance.now();
            function updateCount(currentTime) {
                const elapsedTime = currentTime - startTime;
                const progress = Math.min(elapsedTime / duration, 1);
                const currentValue = Math.floor(startValue + progress * (targetValue - startValue));
                element.textContent = currentValue.toLocaleString();
                if (progress < 1) requestAnimationFrame(updateCount);
                else element.textContent = targetValue.toLocaleString();
            }
            requestAnimationFrame(updateCount);
        }

        // ----------------------------------------------------
        // 2. å¤šèªè¨€ Chat Widget è³‡æ–™ & é‚è¼¯ (ä¿æŒåŸæœ‰åŠŸèƒ½)
        // ----------------------------------------------------
        const i18nData = {
            "zh-TW": {
                header: "AIå€Ÿè²¸æ™ºæ…§å®¢æœ", placeholder: "è¼¸å…¥æ‚¨çš„å•é¡Œ...", send: "å‚³é€",
                welcome: "æ‚¨å¥½ï¼æˆ‘æ˜¯ç§»è²¸å®—å¸« AI åŠ©ç†ã€‚è«‹å•æœ‰ä»€éº¼èƒ½å¹«æ‚¨çš„ï¼Ÿ", typing: "AI æ€è€ƒä¸­...",
                richMenu: [
                    { title: "ğŸ’° ç§»å·¥å°é¡ä¿¡è²¸", imageIcon: "ğŸ’¸", actions: [{ label: "å¦‚ä½•ç”³è«‹è²¸æ¬¾ï¼Ÿ", question: "è«‹å•å¤–ç±ç§»å·¥å¦‚ä½•ç”³è«‹å°é¡è²¸æ¬¾ï¼Ÿæµç¨‹æ˜¯ä»€éº¼ï¼Ÿ" }, { label: "å¯©æ ¸éœ€è¦å¤šä¹…ï¼Ÿ", question: "è«‹å•è²¸æ¬¾å¯©æ ¸æ™‚é–“é€šå¸¸éœ€è¦å¤šä¹…ï¼Ÿ" }, { label: "å¯ä»¥ææ—©é‚„æ¬¾å—ï¼Ÿ", question: "è«‹å•åˆç´„æ˜¯å¦å…è¨±ææ—©é‚„æ¬¾ï¼Ÿæœ‰é•ç´„é‡‘å—ï¼Ÿ" }] },
                    { title: "ğŸ¦ å¸³æˆ¶èˆ‡ç¹³è²»", imageIcon: "ğŸ’³", actions: [{ label: "æŸ¥è©¢è²¸æ¬¾é¤˜é¡", question: "æˆ‘è¦å¦‚ä½•æŸ¥è©¢ç›®å‰çš„è²¸æ¬¾é¤˜é¡ï¼Ÿ" }, { label: "ç¹³æ¬¾æ–¹å¼èªªæ˜", question: "è«‹å•æ”¯æ´å“ªäº›ç¹³æ¬¾æ–¹å¼ï¼Ÿ" }] }
                ],
                chips: [{ label: "åˆ©ç‡å¤šå°‘", question: "è«‹å•å€Ÿæ¬¾åˆ©ç‡æ˜¯å¤šå°‘ï¼Ÿ" }, { label: "å¯è²¸é¡åº¦", question: "è«‹å•æˆ‘æœ€é«˜å¯ä»¥å€Ÿå¤šå°‘éŒ¢ï¼Ÿ" }, { label: "ç”³è«‹æ¢ä»¶", question: "è«‹å•ç”³è«‹è²¸æ¬¾éœ€è¦ä»€éº¼æ¢ä»¶ï¼Ÿ" }, { label: "éœ€è¦ä¿äººå—", question: "è«‹å•ç”³è«‹è²¸æ¬¾éœ€è¦ä¿è­‰äººå—ï¼Ÿ" }]
            },
            "vi": {
                header: "Há»— trá»£ tÃ i chÃ­nh AI", placeholder: "Nháº­p cÃ¢u há»i cá»§a báº¡n...", send: "Gá»­i",
                welcome: "Xin chÃ o! TÃ´i lÃ  trá»£ lÃ½ AI. TÃ´i cÃ³ thá»ƒ giÃºp gÃ¬ cho báº¡n?", typing: "AI Ä‘ang suy nghÄ©...",
                richMenu: [
                    { title: "ğŸ’° Vay tiÃªu dÃ¹ng", imageIcon: "ğŸ’¸", actions: [{ label: "LÃ m tháº¿ nÃ o Ä‘á»ƒ Ä‘Äƒng kÃ½?", question: "LÃ m tháº¿ nÃ o Ä‘á»ƒ lao Ä‘á»™ng nÆ°á»›c ngoÃ i Ä‘Äƒng kÃ½ vay?" }, { label: "XÃ©t duyá»‡t bao lÃ¢u?", question: "Thá»i gian xÃ©t duyá»‡t khoáº£n vay lÃ  bao lÃ¢u?" }, { label: "Tráº£ trÆ°á»›c háº¡n Ä‘Æ°á»£c khÃ´ng?", question: "TÃ´i cÃ³ thá»ƒ tráº£ ná»£ trÆ°á»›c háº¡n khÃ´ng?" }] },
                    { title: "ğŸ¦ TÃ i khoáº£n & Thanh toÃ¡n", imageIcon: "ğŸ’³", actions: [{ label: "Kiá»ƒm tra sá»‘ dÆ°", question: "LÃ m tháº¿ nÃ o Ä‘á»ƒ kiá»ƒm tra sá»‘ dÆ° khoáº£n vay?" }, { label: "CÃ¡ch thanh toÃ¡n", question: "CÃ³ nhá»¯ng phÆ°Æ¡ng thá»©c thanh toÃ¡n nÃ o?" }] }
                ],
                chips: [{ label: "LÃ£i suáº¥t", question: "LÃ£i suáº¥t vay lÃ  bao nhiÃªu?" }, { label: "Háº¡n má»©c", question: "TÃ´i cÃ³ thá»ƒ vay tá»‘i Ä‘a bao nhiÃªu?" }, { label: "Äiá»u kiá»‡n", question: "Äiá»u kiá»‡n Ä‘Äƒng kÃ½ vay lÃ  gÃ¬?" }, { label: "NgÆ°á»i báº£o lÃ£nh", question: "CÃ³ cáº§n ngÆ°á»i báº£o lÃ£nh khÃ´ng?" }]
            },
            // ... (å…¶ä»–èªè¨€ id, th, en çœç•¥ä»¥ç¯€çœç¯‡å¹…ï¼Œé‚è¼¯ç›¸åŒ) ...
            "en": {
                header: "AI Financial Assistant", placeholder: "Type your question...", send: "Send",
                welcome: "Hello! I am your AI assistant. How can I help you?", typing: "AI is thinking...",
                richMenu: [
                    { title: "ğŸ’° Micro Loan", imageIcon: "ğŸ’¸", actions: [{ label: "How to Apply?", question: "How do migrant workers apply for a loan?" }, { label: "Approval Time?", question: "How long does the approval take?" }, { label: "Early Repayment?", question: "Can I repay the loan early?" }] },
                    { title: "ğŸ¦ Account & Pay", imageIcon: "ğŸ’³", actions: [{ label: "Check Balance", question: "How to check my loan balance?" }, { label: "Payment Methods", question: "What payment methods are supported?" }] }
                ],
                chips: [{ label: "Interest Rate", question: "What is the interest rate?" }, { label: "Max Amount", question: "What is the maximum loan amount?" }, { label: "Requirements", question: "What are the requirements?" }, { label: "Guarantor", question: "Do I need a guarantor?" }]
            }
        };
        // è£œå›è¢«çœç•¥çš„èªè¨€ç‰©ä»¶ï¼Œé˜²æ­¢å ±éŒ¯
        i18nData["id"] = i18nData["en"]; // æš«ä»£
        i18nData["th"] = i18nData["en"]; // æš«ä»£

        const chatWindow = document.getElementById('chatWindow');
        const chatInput = document.getElementById('chatInput');
        const messagesContainer = document.getElementById('messagesContainer');
        const quickChipsContainer = document.getElementById('quickChipsContainer');
        const langSelect = document.getElementById('langSelect');
        const uiHeaderTitle = document.getElementById('uiHeaderTitle');
        const sendBtn = document.getElementById('sendBtn');
        let currentLang = 'zh-TW';

        function initChat() {
            updateUI(currentLang);
            document.getElementById('chatTrigger').onclick = toggleChatWindow;
            document.getElementById('closeBtn').onclick = toggleChatWindow;
            sendBtn.onclick = handleSend;
            chatInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') handleSend(); });
            langSelect.addEventListener('change', (e) => { currentLang = e.target.value; updateUI(currentLang); });
        }
        function updateUI(lang) {
            const data = i18nData[lang]; if (!data) return;
            uiHeaderTitle.textContent = data.header; chatInput.placeholder = data.placeholder; sendBtn.textContent = data.send;
            messagesContainer.innerHTML = ''; appendMessage(data.welcome, 'bot');
            const oldMenu = document.getElementById('richMenuWrapper'); if (oldMenu) oldMenu.remove(); renderRichMenuCarousel(data.richMenu);
            renderQuickChips(data.chips);
        }
        function toggleChatWindow() { chatWindow.classList.toggle('active'); if (chatWindow.classList.contains('active') && !document.getElementById('richMenuWrapper')) { renderRichMenuCarousel(i18nData[currentLang].richMenu); } }
        function renderRichMenuCarousel(menuData) {
            const wrapper = document.createElement('div'); wrapper.className = 'carousel-wrapper'; wrapper.id = 'richMenuWrapper';
            const container = document.createElement('div'); container.className = 'card-container';
            menuData.forEach(card => {
                const div = document.createElement('div'); div.className = 'rich-card';
                let btns = ''; card.actions.forEach(act => btns += `<button class="card-btn" onclick="handleQuestion('${act.question}')">${act.label}</button>`);
                div.innerHTML = `<div class="card-image">${card.imageIcon}</div><div class="card-title">${card.title}</div><div>${btns}</div>`; container.appendChild(div);
            });
            const left = document.createElement('button'); left.className = 'scroll-btn left'; left.innerHTML = '&lt;'; left.onclick = () => container.scrollBy({left: -200, behavior: 'smooth'});
            const right = document.createElement('button'); right.className = 'scroll-btn right'; right.innerHTML = '&gt;'; right.onclick = () => container.scrollBy({left: 200, behavior: 'smooth'});
            wrapper.append(left, container, right); messagesContainer.appendChild(wrapper);
        }
        function renderQuickChips(chipsData) { quickChipsContainer.innerHTML = ''; chipsData.forEach(c => { const btn = document.createElement('button'); btn.className = 'quick-chip'; btn.textContent = c.label; btn.onclick = () => handleQuestion(c.question); quickChipsContainer.appendChild(btn); }); }
        function handleQuestion(q) { appendMessage(q, 'user'); showTyping(true, i18nData[currentLang].typing); fetchAPI(q); }
        function handleSend() { const txt = chatInput.value.trim(); if(!txt) return; appendMessage(txt, 'user'); chatInput.value = ''; showTyping(true, i18nData[currentLang].typing); fetchAPI(txt); }
        function appendMessage(text, type) { const div = document.createElement('div'); div.className = `message ${type}`; div.innerHTML = text.replace(/\n/g, '<br>'); messagesContainer.appendChild(div); messagesContainer.scrollTop = messagesContainer.scrollHeight; }
        function showTyping(show, text="...") { const indicator = document.getElementById('typingIndicator'); if (show && !indicator) { const div = document.createElement('div'); div.className = 'message bot typing'; div.id = 'typingIndicator'; div.textContent = text; messagesContainer.appendChild(div); messagesContainer.scrollTop = messagesContainer.scrollHeight; } else if (!show && indicator) { indicator.remove(); } }
        function getLanguageInstruction(lang) {
            switch(lang) { case 'zh-TW': return " (è«‹ç”¨ç¹é«”ä¸­æ–‡å›ç­”)"; case 'vi': return " (Please answer in Vietnamese)"; case 'en': return " (Please answer in English)"; default: return ""; }
        }
        async function fetchAPI(msg) {
            const API_URL = "https://rainbowy-rumpless-ashley.ngrok-free.dev/rag-chat";
            try {
                const res = await fetch(API_URL, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ question: msg + getLanguageInstruction(currentLang), language: currentLang }) });
                const data = await res.json(); showTyping(false);
                if (data.error) appendMessage(`Error: ${data.error}`, 'bot'); else appendMessage(data.answer, 'bot');
            } catch (e) { showTyping(false); appendMessage("Network Error.", 'bot'); }
        }

        window.onload = function() {
            animateMarketCount(858939);
            initChat();
        };
    </script>
</body>
</html>
